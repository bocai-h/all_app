<% provide(:page_title,"login") %>
<!-- Top content -->
    <div class="top-content">

      <div class="inner-bg">
        <div class="container">
          <div class="row">
            <div class="col-sm-6 col-sm-offset-3 form-box">
              <div class="form-top">
                <div class="form-top-left">
                  <h3>登录</h3>

                  <p>输入邮箱和密码登入</p>
                </div>
                <div class="form-top-right">
                  <i class="fa fa-key"></i>
                </div>
              </div>
              <div class="form-bottom">
                <%= form_for(:session, url: sessions_path, :html => {:class => "sign-in-form", :id => "sign-in-form"}) do |f| %>
                  <div class="form-group">
                    <label class="sr-only" for="form-username">Username</label>
                    <%= f.text_field :email, :class => "form-username form-control", :id => "form-username", :placeholder => "Email", :autocomplete => "off" %>
                  </div>
                  <div class="form-group">
                    <label class="sr-only" for="form-password">Password</label>
                    <%= f.password_field :password, :class => "form-password form-control", :id => "form-password",:placeholder => "Password...",:autocomplete => "off"%>
                  </div>
                    <div class="form-group">
                      <label class="sr-only" for="form-remember-me">remember-me</label>
                      <%= check_box_tag :remember_me,"1",:html => {:class => "form-remember-me form-control", :id => "form-remember-me", :autocomplete => "off"} %>&nbsp;remembe
                      me
                    </div>
                  <button type="submit" class="btn">Sign in!</button>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <%= content_for :template_js do %>
   <script>
      $(function(){
          <% if @user_name.present? %>
            $("#form-username").val('<%= @user_name %>');
          <% end %>

         $('.login-form input[type="text"], .login-form input[type="password"], .login-form textarea').on('focus', function() {
          $(this).removeClass('input-error');
         });

         $('#sign-in-form').on('submit', function(e) {

          $(this).find('input[type="text"], input[type="password"], textarea').each(function(){
            if( $(this).val() == "" ) {
              e.preventDefault();
              $(this).addClass('input-error');
            }
            else {
              $(this).removeClass('input-error');
            }
          });

        });
      });
   </script>
  <% end %>